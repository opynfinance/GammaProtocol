<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="5888pt" height="2547pt"
 viewBox="0.00 0.00 5888.13 2546.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2542.8)">
<title>UmlClassDiagram</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2542.8 5884.1271,-2542.8 5884.1271,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="0,-445.7 0,-1040.9 336.7358,-1040.9 336.7358,-445.7 0,-445.7"/>
<text text-anchor="middle" x="168.3679" y="-1024.3" font-family="Times,serif" font-size="14.00" fill="#000000">AddressBook</text>
<polyline fill="none" stroke="#000000" points="0,-1016.1 336.7358,-1016.1 "/>
<text text-anchor="start" x="8" y="-999.5" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="8" y="-982.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;OTOKEN_IMPL: bytes32</text>
<text text-anchor="start" x="8" y="-965.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;OTOKEN_FACTORY: bytes32</text>
<text text-anchor="start" x="8" y="-949.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;WHITELIST: bytes32</text>
<text text-anchor="start" x="8" y="-932.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;CONTROLLER: bytes32</text>
<text text-anchor="start" x="8" y="-915.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;MARGIN_POOL: bytes32</text>
<text text-anchor="start" x="8" y="-898.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;MARGIN_CALCULATOR: bytes32</text>
<text text-anchor="start" x="8" y="-881.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;LIQUIDATION_MANAGER: bytes32</text>
<text text-anchor="start" x="8" y="-865.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;ORACLE: bytes32</text>
<text text-anchor="start" x="8" y="-848.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;addresses: mapping(bytes32=&gt;address)</text>
<polyline fill="none" stroke="#000000" points="0,-840.1 336.7358,-840.1 "/>
<text text-anchor="start" x="8" y="-823.5" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="8" y="-806.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setOtokenImpl(_otokenImpl: address)</text>
<text text-anchor="start" x="8" y="-789.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOtokenImpl(): address</text>
<text text-anchor="start" x="8" y="-773.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getWhitelist(): address</text>
<text text-anchor="start" x="8" y="-756.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getController(): address</text>
<text text-anchor="start" x="8" y="-739.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getMarginPool(): address</text>
<text text-anchor="start" x="8" y="-722.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getMarginCalculator(): address</text>
<text text-anchor="start" x="8" y="-705.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getLiquidationManager(): address</text>
<text text-anchor="start" x="8" y="-689.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOracle(): address</text>
<text text-anchor="start" x="8" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOtokenFactory(): address</text>
<text text-anchor="start" x="8" y="-655.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setOtokenFactory(_otokenFactory: address)</text>
<text text-anchor="start" x="8" y="-638.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setWhitelist(_whitelist: address)</text>
<text text-anchor="start" x="8" y="-621.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setController(_controller: address)</text>
<text text-anchor="start" x="8" y="-605.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setMarginPool(_marginPool: address)</text>
<text text-anchor="start" x="8" y="-588.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setMarginCalculator(_marginCalculator: address)</text>
<text text-anchor="start" x="8" y="-571.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setLiquidationManager(_liquidationManager: address)</text>
<text text-anchor="start" x="8" y="-554.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setOracle(_oracle: address)</text>
<text text-anchor="start" x="8" y="-537.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="8" y="-521.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ProxyCreated(id: bytes32, proxy: address)</text>
<text text-anchor="start" x="8" y="-504.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; AddressAdded(id: bytes32, add: address)</text>
<text text-anchor="start" x="8" y="-487.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getAddress(_key: bytes32): address</text>
<text text-anchor="start" x="8" y="-470.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setAddress(_key: bytes32, _address: address)</text>
<text text-anchor="start" x="8" y="-453.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;updateImpl(_id: bytes32, _newAddress: address)</text>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="354.616,-.5 354.616,-1486.1 1558.1198,-1486.1 1558.1198,-.5 354.616,-.5"/>
<text text-anchor="middle" x="956.3679" y="-1469.5" font-family="Times,serif" font-size="14.00" fill="#000000">Controller</text>
<polyline fill="none" stroke="#000000" points="354.616,-1461.3 1558.1198,-1461.3 "/>
<text text-anchor="start" x="362.616" y="-1444.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="362.616" y="-1427.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;BASE: uint256</text>
<text text-anchor="start" x="362.616" y="-1411.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;accountVaultCounter: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="362.616" y="-1394.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;vaults: mapping(address=&gt;mapping(uint256=&gt;MarginVault.Vault))</text>
<text text-anchor="start" x="362.616" y="-1377.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;operators: mapping(address=&gt;mapping(address=&gt;bool))</text>
<text text-anchor="start" x="362.616" y="-1360.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;vaultType: mapping(address=&gt;mapping(uint256=&gt;uint256))</text>
<text text-anchor="start" x="362.616" y="-1343.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;vaultLatestUpdate: mapping(address=&gt;mapping(uint256=&gt;uint256))</text>
<text text-anchor="start" x="362.616" y="-1327.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="362.616" y="-1310.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;addressbook: AddressBookInterface</text>
<text text-anchor="start" x="362.616" y="-1293.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;whitelist: WhitelistInterface</text>
<text text-anchor="start" x="362.616" y="-1276.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;oracle: OracleInterface</text>
<text text-anchor="start" x="362.616" y="-1259.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;calculator: MarginCalculatorInterface</text>
<text text-anchor="start" x="362.616" y="-1243.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;pool: MarginPoolInterface</text>
<text text-anchor="start" x="362.616" y="-1226.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;partialPauser: address</text>
<text text-anchor="start" x="362.616" y="-1209.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;fullPauser: address</text>
<text text-anchor="start" x="362.616" y="-1192.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;systemPartiallyPaused: bool</text>
<text text-anchor="start" x="362.616" y="-1175.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;systemFullyPaused: bool</text>
<text text-anchor="start" x="362.616" y="-1159.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;callRestricted: bool</text>
<polyline fill="none" stroke="#000000" points="354.616,-1150.9 1558.1198,-1150.9 "/>
<text text-anchor="start" x="362.616" y="-1134.3" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="362.616" y="-1117.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_mintOtoken(_args: Actions.MintArgs)</text>
<text text-anchor="start" x="362.616" y="-1100.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isNotPartiallyPaused()</text>
<text text-anchor="start" x="362.616" y="-1083.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isAuthorized(_sender: address, _accountOwner: address)</text>
<text text-anchor="start" x="362.616" y="-1067.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_runActions(_actions: Actions.ActionArgs[]): (bool, address, uint256)</text>
<text text-anchor="start" x="362.616" y="-1050.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_verifyFinalState(_owner: address, _vaultId: uint256)</text>
<text text-anchor="start" x="362.616" y="-1033.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_openVault(_args: Actions.OpenVaultArgs)</text>
<text text-anchor="start" x="362.616" y="-1016.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_depositLong(_args: Actions.DepositArgs)</text>
<text text-anchor="start" x="362.616" y="-999.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_withdrawLong(_args: Actions.WithdrawArgs)</text>
<text text-anchor="start" x="362.616" y="-983.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_depositCollateral(_args: Actions.DepositArgs)</text>
<text text-anchor="start" x="362.616" y="-966.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_withdrawCollateral(_args: Actions.WithdrawArgs)</text>
<text text-anchor="start" x="362.616" y="-949.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isNotFullyPaused()</text>
<text text-anchor="start" x="362.616" y="-932.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_burnOtoken(_args: Actions.BurnArgs)</text>
<text text-anchor="start" x="362.616" y="-915.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_redeem(_args: Actions.RedeemArgs)</text>
<text text-anchor="start" x="362.616" y="-899.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_settleVault(_args: Actions.SettleVaultArgs)</text>
<text text-anchor="start" x="362.616" y="-882.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_liquidate(_args: Actions.LiquidateArgs)</text>
<text text-anchor="start" x="362.616" y="-865.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_call(_args: Actions.CallArgs)</text>
<text text-anchor="start" x="362.616" y="-848.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_checkVaultId(_accountOwner: address, _vaultId: uint256): bool</text>
<text text-anchor="start" x="362.616" y="-831.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isNotEmpty(_array: address[]): bool</text>
<text text-anchor="start" x="362.616" y="-815.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isCalleeWhitelisted(_callee: address): bool</text>
<text text-anchor="start" x="362.616" y="-798.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isLiquidatable(_owner: address, _vaultId: uint256, _roundId: uint256): (MarginVault.Vault, bool, uint256, uint256)</text>
<text text-anchor="start" x="362.616" y="-781.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_refreshConfigInternal()</text>
<text text-anchor="start" x="362.616" y="-764.7" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="362.616" y="-747.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;refreshConfiguration()</text>
<text text-anchor="start" x="362.616" y="-731.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;initialize(_addressBook: address, _owner: address)</text>
<text text-anchor="start" x="362.616" y="-714.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setSystemPartiallyPaused(_partiallyPaused: bool)</text>
<text text-anchor="start" x="362.616" y="-697.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setSystemFullyPaused(_fullyPaused: bool)</text>
<text text-anchor="start" x="362.616" y="-680.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setFullPauser(_fullPauser: address)</text>
<text text-anchor="start" x="362.616" y="-663.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setPartialPauser(_partialPauser: address)</text>
<text text-anchor="start" x="362.616" y="-647.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setCallRestriction(_isRestricted: bool)</text>
<text text-anchor="start" x="362.616" y="-630.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setOperator(_operator: address, _isOperator: bool)</text>
<text text-anchor="start" x="362.616" y="-613.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;donate(_asset: address, _amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-596.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;operate(_actions: Actions.ActionArgs[])</text>
<text text-anchor="start" x="362.616" y="-579.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;sync(_owner: address, _vaultId: uint256)</text>
<text text-anchor="start" x="362.616" y="-563.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isOperator(_owner: address, _operator: address): bool</text>
<text text-anchor="start" x="362.616" y="-546.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getConfiguration(): (address, address, address, address)</text>
<text text-anchor="start" x="362.616" y="-529.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getProceed(_owner: address, _vaultId: uint256): uint256</text>
<text text-anchor="start" x="362.616" y="-512.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isLiquidatable(_owner: address, _vaultId: uint256, _roundId: uint256): (bool, uint256, uint256)</text>
<text text-anchor="start" x="362.616" y="-495.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getAccountVaultCounter(_accountOwner: address): uint256</text>
<text text-anchor="start" x="362.616" y="-479.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;hasExpired(_otoken: address): bool</text>
<text text-anchor="start" x="362.616" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="362.616" y="-445.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; PartialPauserUpdated(oldPartialPauser: address, newPartialPauser: address)</text>
<text text-anchor="start" x="362.616" y="-428.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; AccountOperatorUpdated(accountOwner: address, operator: address, isSet: bool)</text>
<text text-anchor="start" x="362.616" y="-411.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; LongOtokenDeposited(otoken: address, accountOwner: address, from: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-395.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; LongOtokenWithdrawed(otoken: address, AccountOwner: address, to: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-378.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralAssetDeposited(asset: address, accountOwner: address, from: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-361.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralAssetWithdrawed(asset: address, AccountOwner: address, to: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-344.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ShortOtokenMinted(otoken: address, AccountOwner: address, to: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-327.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ShortOtokenBurned(otoken: address, AccountOwner: address, from: address, vaultId: uint256, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-311.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Redeem(otoken: address, redeemer: address, receiver: address, collateralAsset: address, otokenBurned: uint256, payout: uint256)</text>
<text text-anchor="start" x="362.616" y="-294.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; VaultSettled(accountOwner: address, oTokenAddress: address, to: address, payout: uint256, vaultId: uint256, vaultType: uint256)</text>
<text text-anchor="start" x="362.616" y="-277.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; VaultLiquidated(liquidator: address, receiver: address, vaultOwner: address, auctionPrice: uint256, auctionStartingRound: uint256, collateralPayout: uint256, debtAmount: uint256, vaultId: uint256)</text>
<text text-anchor="start" x="362.616" y="-260.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CallExecuted(from: address, to: address, data: bytes)</text>
<text text-anchor="start" x="362.616" y="-243.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; FullPauserUpdated(oldFullPauser: address, newFullPauser: address)</text>
<text text-anchor="start" x="362.616" y="-227.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; VaultOpened(accountOwner: address, vaultId: uint256, vaultType: uint256)</text>
<text text-anchor="start" x="362.616" y="-210.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; SystemPartiallyPaused(isPaused: bool)</text>
<text text-anchor="start" x="362.616" y="-193.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; SystemFullyPaused(isPaused: bool)</text>
<text text-anchor="start" x="362.616" y="-176.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CallRestricted(isRestricted: bool)</text>
<text text-anchor="start" x="362.616" y="-159.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; Donated(donator: address, asset: address, amount: uint256)</text>
<text text-anchor="start" x="362.616" y="-143.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; notPartiallyPaused()</text>
<text text-anchor="start" x="362.616" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; notFullyPaused()</text>
<text text-anchor="start" x="362.616" y="-109.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyFullPauser()</text>
<text text-anchor="start" x="362.616" y="-92.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyPartialPauser()</text>
<text text-anchor="start" x="362.616" y="-75.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyAuthorized(_sender: address, _accountOwner: address)</text>
<text text-anchor="start" x="362.616" y="-59.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyWhitelistedCallee(_callee: address)</text>
<text text-anchor="start" x="362.616" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getPayout(_otoken: address, _amount: uint256): uint256</text>
<text text-anchor="start" x="362.616" y="-25.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isSettlementAllowedWithDetails(_underlying: address, _strike: address, _collateral: address, _expiry: uint256): bool</text>
<text text-anchor="start" x="362.616" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getVaultWithDetails(_owner: address, _vaultId: uint256): (MarginVault.Vault, uint256, uint256)</text>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1210.8873,-1523.1 1210.8873,-2538.3 2625.8485,-2538.3 2625.8485,-1523.1 1210.8873,-1523.1"/>
<text text-anchor="middle" x="1918.3679" y="-2521.7" font-family="Times,serif" font-size="14.00" fill="#000000">MarginCalculator</text>
<polyline fill="none" stroke="#000000" points="1210.8873,-2513.5 2625.8485,-2513.5 "/>
<text text-anchor="start" x="1218.8873" y="-2496.9" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1218.8873" y="-2480.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;SCALING_FACTOR: uint256</text>
<text text-anchor="start" x="1218.8873" y="-2463.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;BASE: uint256</text>
<text text-anchor="start" x="1218.8873" y="-2446.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;oracleDeviation: uint256</text>
<text text-anchor="start" x="1218.8873" y="-2429.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;ZERO: FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2412.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;dust: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="1218.8873" y="-2396.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;cap: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="1218.8873" y="-2379.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;timesToExpiryForProduct: mapping(bytes32=&gt;uint256[])</text>
<text text-anchor="start" x="1218.8873" y="-2362.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;maxPriceAtTimeToExpiry: mapping(bytes32=&gt;mapping(uint256=&gt;uint256))</text>
<text text-anchor="start" x="1218.8873" y="-2345.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;spotShock: mapping(bytes32=&gt;uint256)</text>
<text text-anchor="start" x="1218.8873" y="-2328.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1218.8873" y="-2312.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;AUCTION_TIME: uint256</text>
<text text-anchor="start" x="1218.8873" y="-2295.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;oracle: OracleInterface</text>
<polyline fill="none" stroke="#000000" points="1210.8873,-2287.1 2625.8485,-2287.1 "/>
<text text-anchor="start" x="1218.8873" y="-2270.5" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="1218.8873" y="-2253.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getDebtPrice(_vaultCollateral: FPI.FixedPointInt, _vaultDebt: FPI.FixedPointInt, _cashValue: FPI.FixedPointInt, _spotPrice: FPI.FixedPointInt, _auctionStartingTime: uint256, _collateralDecimals: uint256, _isPut: bool): uint256</text>
<text text-anchor="start" x="1218.8873" y="-2236.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getExpiredCashValue(_underlying: address, _strike: address, _expiryTimestamp: uint256, _strikePrice: uint256, _isPut: bool): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2220.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getNakedMarginRequired(_productHash: bytes32, _shortAmount: FPI.FixedPointInt, _underlyingPrice: FPI.FixedPointInt, _strikePrice: FPI.FixedPointInt, _shortExpiryTimestamp: uint256, _isPut: bool): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2203.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_findUpperBoundValue(_productHash: bytes32, _expiryTimestamp: uint256): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2186.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getPutSpreadMarginRequired(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortStrike: FPI.FixedPointInt, _longStrike: FPI.FixedPointInt): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2169.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getCallSpreadMarginRequired(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortStrike: FPI.FixedPointInt, _longStrike: FPI.FixedPointInt): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2152.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_convertAmountOnLivePrice(_amount: FPI.FixedPointInt, _assetA: address, _assetB: address): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2136.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_convertAmountOnExpiryPrice(_amount: FPI.FixedPointInt, _assetA: address, _assetB: address, _expiry: uint256): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2119.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getMarginRequired(_vault: MarginVault.Vault, _vaultDetails: VaultDetails): (FPI.FixedPointInt, FPI.FixedPointInt)</text>
<text text-anchor="start" x="1218.8873" y="-2102.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getVaultDetails(_vault: MarginVault.Vault, _vaultType: uint256): VaultDetails</text>
<text text-anchor="start" x="1218.8873" y="-2085.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getExpiredSpreadCashValue(_shortAmount: FPI.FixedPointInt, _longAmount: FPI.FixedPointInt, _shortCashValue: FPI.FixedPointInt, _longCashValue: FPI.FixedPointInt): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-2068.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isNotEmpty(_assets: address[]): bool</text>
<text text-anchor="start" x="1218.8873" y="-2052.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_checkIsValidVault(_vault: MarginVault.Vault, _vaultDetails: VaultDetails)</text>
<text text-anchor="start" x="1218.8873" y="-2035.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isMarginableLong(_vault: MarginVault.Vault, _vaultDetails: VaultDetails): bool</text>
<text text-anchor="start" x="1218.8873" y="-2018.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_isMarginableCollateral(_vault: MarginVault.Vault, _vaultDetails: VaultDetails): bool</text>
<text text-anchor="start" x="1218.8873" y="-2001.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getProductHash(_underlying: address, _strike: address, _collateral: address, _isPut: bool): bytes32</text>
<text text-anchor="start" x="1218.8873" y="-1984.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getCashValue(_strikePrice: FPI.FixedPointInt, _underlyingPrice: FPI.FixedPointInt, _isPut: bool): FPI.FixedPointInt</text>
<text text-anchor="start" x="1218.8873" y="-1968.1" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="1218.8873" y="-1951.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getTimesToExpiry(_underlying: address, _strike: address, _collateral: address, _isPut: bool): uint256[]</text>
<text text-anchor="start" x="1218.8873" y="-1934.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setCollateralDust(_collateral: address, _dust: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1917.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setUpperBoundValues(_underlying: address, _strike: address, _collateral: address, _isPut: bool, _timesToExpiry: uint256[], _values: uint256[])</text>
<text text-anchor="start" x="1218.8873" y="-1900.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;updateUpperBoundValue(_underlying: address, _strike: address, _collateral: address, _isPut: bool, _timeToExpiry: uint256, _value: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1884.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setSpotShock(_underlying: address, _strike: address, _collateral: address, _isPut: bool, _shockValue: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1867.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setOracleDeviation(_deviation: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1850.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getCollateralDust(_collateral: address): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1833.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getCollateralCap(_collateral: address): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1816.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setCollateralCap(_collateral: address, _cap: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1800.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getMaxPrice(_underlying: address, _strike: address, _collateral: address, _isPut: bool, _timeToExpiry: uint256): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1783.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getSpotShock(_underlying: address, _strike: address, _collateral: address, _isPut: bool): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1766.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOracleDeviation(): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1749.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getNakedMarginRequired(_underlying: address, _strike: address, _collateral: address, _shortAmount: uint256, _strikePrice: uint256, _underlyingPrice: uint256, _shortExpiryTimestamp: uint256, _collateralDecimals: uint256, _isPut: bool): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1732.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getExpiredPayoutRate(_otoken: address): uint256</text>
<text text-anchor="start" x="1218.8873" y="-1716.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isLiquidatable(_vault: MarginVault.Vault, _vaultType: uint256, _vaultLatestUpdate: uint256, _roundId: uint256): (bool, uint256, uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1699.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getMarginRequired(_vault: MarginVault.Vault, _vaultType: uint256): (FPI.FixedPointInt, FPI.FixedPointInt)</text>
<text text-anchor="start" x="1218.8873" y="-1682.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="1218.8873" y="-1665.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralDustUpdated(collateral: address, dust: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1648.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralCapUpdated(collateral: address, cap: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1632.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; TimeToExpiryAdded(productHash: bytes32, timeToExpiry: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1615.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; MaxPriceAdded(productHash: bytes32, timeToExpiry: uint256, value: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1598.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; MaxPriceUpdated(productHash: bytes32, timeToExpiry: uint256, oldValue: uint256, newValue: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1581.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; SpotShockUpdated(product: bytes32, spotShock: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1564.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OracleDeviationUpdated(oracleDeviation: uint256)</text>
<text text-anchor="start" x="1218.8873" y="-1548.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_oracle: address)</text>
<text text-anchor="start" x="1218.8873" y="-1531.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getExcessCollateral(_vault: MarginVault.Vault, _vaultType: uint256): (uint256, bool)</text>
</g>
<!-- 2struct0 -->
<g id="node4" class="node">
<title>2struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1576.249,-558.9 1576.249,-927.7 1778.4868,-927.7 1778.4868,-558.9 1576.249,-558.9"/>
<text text-anchor="middle" x="1677.3679" y="-911.1" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="1677.3679" y="-894.3" font-family="Times,serif" font-size="14.00" fill="#000000">VaultDetails</text>
<polyline fill="none" stroke="#000000" points="1576.249,-886.1 1778.4868,-886.1 "/>
<text text-anchor="start" x="1584.249" y="-869.5" font-family="Times,serif" font-size="14.00" fill="#000000">shortUnderlyingAsset: address</text>
<text text-anchor="start" x="1584.249" y="-852.7" font-family="Times,serif" font-size="14.00" fill="#000000">shortStrikeAsset: address</text>
<text text-anchor="start" x="1584.249" y="-835.9" font-family="Times,serif" font-size="14.00" fill="#000000">shortCollateralAsset: address</text>
<text text-anchor="start" x="1584.249" y="-819.1" font-family="Times,serif" font-size="14.00" fill="#000000">longUnderlyingAsset: address</text>
<text text-anchor="start" x="1584.249" y="-802.3" font-family="Times,serif" font-size="14.00" fill="#000000">longStrikeAsset: address</text>
<text text-anchor="start" x="1584.249" y="-785.5" font-family="Times,serif" font-size="14.00" fill="#000000">longCollateralAsset: address</text>
<text text-anchor="start" x="1584.249" y="-768.7" font-family="Times,serif" font-size="14.00" fill="#000000">shortStrikePrice: uint256</text>
<text text-anchor="start" x="1584.249" y="-751.9" font-family="Times,serif" font-size="14.00" fill="#000000">shortExpiryTimestamp: uint256</text>
<text text-anchor="start" x="1584.249" y="-735.1" font-family="Times,serif" font-size="14.00" fill="#000000">shortCollateralDecimals: uint256</text>
<text text-anchor="start" x="1584.249" y="-718.3" font-family="Times,serif" font-size="14.00" fill="#000000">longStrikePrice: uint256</text>
<text text-anchor="start" x="1584.249" y="-701.5" font-family="Times,serif" font-size="14.00" fill="#000000">longExpiryTimestamp: uint256</text>
<text text-anchor="start" x="1584.249" y="-684.7" font-family="Times,serif" font-size="14.00" fill="#000000">longCollateralDecimals: uint256</text>
<text text-anchor="start" x="1584.249" y="-667.9" font-family="Times,serif" font-size="14.00" fill="#000000">collateralDecimals: uint256</text>
<text text-anchor="start" x="1584.249" y="-651.1" font-family="Times,serif" font-size="14.00" fill="#000000">vaultType: uint256</text>
<text text-anchor="start" x="1584.249" y="-634.3" font-family="Times,serif" font-size="14.00" fill="#000000">isShortPut: bool</text>
<text text-anchor="start" x="1584.249" y="-617.5" font-family="Times,serif" font-size="14.00" fill="#000000">isLongPut: bool</text>
<text text-anchor="start" x="1584.249" y="-600.7" font-family="Times,serif" font-size="14.00" fill="#000000">hasLong: bool</text>
<text text-anchor="start" x="1584.249" y="-583.9" font-family="Times,serif" font-size="14.00" fill="#000000">hasShort: bool</text>
<text text-anchor="start" x="1584.249" y="-567.1" font-family="Times,serif" font-size="14.00" fill="#000000">hasCollateral: bool</text>
</g>
<!-- 2struct0&#45;&gt;2 -->
<g id="edge1" class="edge">
<title>2struct0&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M1700.0019,-927.7369C1719.6349,-1078.6182 1750.6342,-1297.226 1787.3679,-1486.6 1788.9373,-1494.6908 1790.5465,-1502.8428 1792.1912,-1511.0431"/>
<polygon fill="#000000" stroke="#000000" points="1792.2488,-1511.3282 1797.358,-1516.417 1794.6258,-1523.0904 1789.5165,-1518.0016 1792.2488,-1511.3282"/>
</g>
<!-- 2struct1 -->
<g id="node5" class="node">
<title>2struct1</title>
<polygon fill="#f2f2f2" stroke="#000000" points="1796.0474,-693.3 1796.0474,-793.3 2040.6884,-793.3 2040.6884,-693.3 1796.0474,-693.3"/>
<text text-anchor="middle" x="1918.3679" y="-776.7" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="1918.3679" y="-759.9" font-family="Times,serif" font-size="14.00" fill="#000000">ShortScaledDetails</text>
<polyline fill="none" stroke="#000000" points="1796.0474,-751.7 2040.6884,-751.7 "/>
<text text-anchor="start" x="1804.0474" y="-735.1" font-family="Times,serif" font-size="14.00" fill="#000000">shortAmount: FPI.FixedPointInt</text>
<text text-anchor="start" x="1804.0474" y="-718.3" font-family="Times,serif" font-size="14.00" fill="#000000">shortStrike: FPI.FixedPointInt</text>
<text text-anchor="start" x="1804.0474" y="-701.5" font-family="Times,serif" font-size="14.00" fill="#000000">shortUnderlyingPrice: FPI.FixedPointInt</text>
</g>
<!-- 2struct1&#45;&gt;2 -->
<g id="edge2" class="edge">
<title>2struct1&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M1918.3679,-793.3725C1918.3679,-913.4311 1918.3679,-1228.7067 1918.3679,-1510.9428"/>
<polygon fill="#000000" stroke="#000000" points="1918.368,-1511.0834 1922.3679,-1517.0835 1918.3679,-1523.0834 1914.3679,-1517.0834 1918.368,-1511.0834"/>
</g>
<!-- 2struct2 -->
<g id="node6" class="node">
<title>2struct2</title>
<polygon fill="#f2f2f2" stroke="#000000" points="2058.1985,-676.5 2058.1985,-810.1 2256.5373,-810.1 2256.5373,-676.5 2058.1985,-676.5"/>
<text text-anchor="middle" x="2157.3679" y="-793.5" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="2157.3679" y="-776.7" font-family="Times,serif" font-size="14.00" fill="#000000">OtokenDetails</text>
<polyline fill="none" stroke="#000000" points="2058.1985,-768.5 2256.5373,-768.5 "/>
<text text-anchor="start" x="2066.1985" y="-751.9" font-family="Times,serif" font-size="14.00" fill="#000000">otokenUnderlyingAsset: address</text>
<text text-anchor="start" x="2066.1985" y="-735.1" font-family="Times,serif" font-size="14.00" fill="#000000">otokenCollateralAsset: address</text>
<text text-anchor="start" x="2066.1985" y="-718.3" font-family="Times,serif" font-size="14.00" fill="#000000">otokenStrikeAsset: address</text>
<text text-anchor="start" x="2066.1985" y="-701.5" font-family="Times,serif" font-size="14.00" fill="#000000">otokenExpiry: uint256</text>
<text text-anchor="start" x="2066.1985" y="-684.7" font-family="Times,serif" font-size="14.00" fill="#000000">isPut: bool</text>
</g>
<!-- 2struct2&#45;&gt;2 -->
<g id="edge3" class="edge">
<title>2struct2&#45;&gt;2</title>
<path fill="none" stroke="#000000" d="M2149.7327,-810.2747C2134.3729,-940.9537 2097.0905,-1238.8297 2049.3679,-1486.6 2047.8091,-1494.6929 2046.2099,-1502.8468 2044.5745,-1511.0488"/>
<polygon fill="#000000" stroke="#000000" points="2044.5173,-1511.3339 2047.2568,-1518.0044 2042.1531,-1523.0987 2039.4135,-1516.4283 2044.5173,-1511.3339"/>
</g>
<!-- 3 -->
<g id="node7" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="#000000" points="2401.6542,-546.5 2401.6542,-940.1 2865.0816,-940.1 2865.0816,-546.5 2401.6542,-546.5"/>
<text text-anchor="middle" x="2633.3679" y="-923.5" font-family="Times,serif" font-size="14.00" fill="#000000">MarginPool</text>
<polyline fill="none" stroke="#000000" points="2401.6542,-915.3 2865.0816,-915.3 "/>
<text text-anchor="start" x="2409.6542" y="-898.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="2409.6542" y="-881.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;assetBalance: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="2409.6542" y="-865.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="2409.6542" y="-848.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;addressBook: address</text>
<text text-anchor="start" x="2409.6542" y="-831.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;farmer: address</text>
<polyline fill="none" stroke="#000000" points="2401.6542,-823.3 2865.0816,-823.3 "/>
<text text-anchor="start" x="2409.6542" y="-806.7" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="2409.6542" y="-789.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getStoredBalance(_asset: address): uint256</text>
<text text-anchor="start" x="2409.6542" y="-773.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;batchTransferToPool(_asset: address[], _user: address[], _amount: uint256[])</text>
<text text-anchor="start" x="2409.6542" y="-756.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;batchTransferToUser(_asset: address[], _user: address[], _amount: uint256[])</text>
<text text-anchor="start" x="2409.6542" y="-739.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;farm(_asset: address, _receiver: address, _amount: uint256)</text>
<text text-anchor="start" x="2409.6542" y="-722.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setFarmer(_farmer: address)</text>
<text text-anchor="start" x="2409.6542" y="-705.9" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="2409.6542" y="-689.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; TransferToPool(asset: address, user: address, amount: uint256)</text>
<text text-anchor="start" x="2409.6542" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; TransferToUser(asset: address, user: address, amount: uint256)</text>
<text text-anchor="start" x="2409.6542" y="-655.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; FarmerUpdated(oldAddress: address, newAddress: address)</text>
<text text-anchor="start" x="2409.6542" y="-638.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; AssetFarmed(asset: address, receiver: address, amount: uint256)</text>
<text text-anchor="start" x="2409.6542" y="-621.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyController()</text>
<text text-anchor="start" x="2409.6542" y="-605.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyFarmer()</text>
<text text-anchor="start" x="2409.6542" y="-588.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_addressBook: address)</text>
<text text-anchor="start" x="2409.6542" y="-571.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;transferToPool(_asset: address, _user: address, _amount: uint256)</text>
<text text-anchor="start" x="2409.6542" y="-554.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;transferToUser(_asset: address, _user: address, _amount: uint256)</text>
</g>
<!-- 4 -->
<g id="node8" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="#000000" points="2643.4327,-1707.9 2643.4327,-2353.5 3501.3031,-2353.5 3501.3031,-1707.9 2643.4327,-1707.9"/>
<text text-anchor="middle" x="3072.3679" y="-2336.9" font-family="Times,serif" font-size="14.00" fill="#000000">Oracle</text>
<polyline fill="none" stroke="#000000" points="2643.4327,-2328.7 3501.3031,-2328.7 "/>
<text text-anchor="start" x="2651.4327" y="-2312.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="2651.4327" y="-2295.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;disputer: address</text>
<text text-anchor="start" x="2651.4327" y="-2278.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;pricerLockingPeriod: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2261.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;pricerDisputePeriod: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2244.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;assetPricer: mapping(address=&gt;address)</text>
<text text-anchor="start" x="2651.4327" y="-2228.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;storedPrice: mapping(address=&gt;mapping(uint256=&gt;Price))</text>
<text text-anchor="start" x="2651.4327" y="-2211.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;stablePrice: mapping(address=&gt;uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2194.5" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="2651.4327" y="-2177.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;migrated: bool</text>
<polyline fill="none" stroke="#000000" points="2643.4327,-2169.5 3501.3031,-2169.5 "/>
<text text-anchor="start" x="2651.4327" y="-2152.9" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="2651.4327" y="-2136.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setExpiryPrice(_asset: address, _expiryTimestamp: uint256, _price: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2119.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;migrateOracle(_asset: address, _expiries: uint256[], _prices: uint256[])</text>
<text text-anchor="start" x="2651.4327" y="-2102.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setAssetPricer(_asset: address, _pricer: address)</text>
<text text-anchor="start" x="2651.4327" y="-2085.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setLockingPeriod(_pricer: address, _lockingPeriod: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2068.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setDisputePeriod(_pricer: address, _disputePeriod: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2052.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setDisputer(_disputer: address)</text>
<text text-anchor="start" x="2651.4327" y="-2035.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setStablePrice(_asset: address, _price: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2018.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;disputeExpiryPrice(_asset: address, _expiryTimestamp: uint256, _price: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-2001.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;endMigration()</text>
<text text-anchor="start" x="2651.4327" y="-1984.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getPrice(_asset: address): uint256</text>
<text text-anchor="start" x="2651.4327" y="-1968.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getExpiryPrice(_asset: address, _expiryTimestamp: uint256): (uint256, bool)</text>
<text text-anchor="start" x="2651.4327" y="-1951.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getPricer(_asset: address): address</text>
<text text-anchor="start" x="2651.4327" y="-1934.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getDisputer(): address</text>
<text text-anchor="start" x="2651.4327" y="-1917.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getPricerLockingPeriod(_pricer: address): uint256</text>
<text text-anchor="start" x="2651.4327" y="-1900.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getPricerDisputePeriod(_pricer: address): uint256</text>
<text text-anchor="start" x="2651.4327" y="-1884.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getChainlinkRoundData(_asset: address, _roundId: uint80): (uint256, uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1867.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="2651.4327" y="-1850.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; DisputerUpdated(newDisputer: address)</text>
<text text-anchor="start" x="2651.4327" y="-1833.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; PricerUpdated(asset: address, pricer: address)</text>
<text text-anchor="start" x="2651.4327" y="-1816.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; PricerLockingPeriodUpdated(pricer: address, lockingPeriod: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1800.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; PricerDisputePeriodUpdated(pricer: address, disputePeriod: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1783.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ExpiryPriceUpdated(asset: address, expiryTimestamp: uint256, price: uint256, onchainTimestamp: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1766.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ExpiryPriceDisputed(asset: address, expiryTimestamp: uint256, disputedPrice: uint256, newPrice: uint256, disputeTimestamp: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1749.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; StablePriceUpdated(asset: address, price: uint256)</text>
<text text-anchor="start" x="2651.4327" y="-1732.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isLockingPeriodOver(_asset: address, _expiryTimestamp: uint256): bool</text>
<text text-anchor="start" x="2651.4327" y="-1716.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isDisputePeriodOver(_asset: address, _expiryTimestamp: uint256): bool</text>
</g>
<!-- 4struct0 -->
<g id="node9" class="node">
<title>4struct0</title>
<polygon fill="#f2f2f2" stroke="#000000" points="3010.1186,-701.7 3010.1186,-784.9 3134.6172,-784.9 3134.6172,-701.7 3010.1186,-701.7"/>
<text text-anchor="middle" x="3072.3679" y="-768.3" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;&lt;struct&gt;&gt;</text>
<text text-anchor="middle" x="3072.3679" y="-751.5" font-family="Times,serif" font-size="14.00" fill="#000000">Price</text>
<polyline fill="none" stroke="#000000" points="3010.1186,-743.3 3134.6172,-743.3 "/>
<text text-anchor="start" x="3018.1186" y="-726.7" font-family="Times,serif" font-size="14.00" fill="#000000">price: uint256</text>
<text text-anchor="start" x="3018.1186" y="-709.9" font-family="Times,serif" font-size="14.00" fill="#000000">timestamp: uint256</text>
</g>
<!-- 4struct0&#45;&gt;4 -->
<g id="edge4" class="edge">
<title>4struct0&#45;&gt;4</title>
<path fill="none" stroke="#000000" d="M3072.3679,-785.0384C3072.3679,-923.2944 3072.3679,-1375.6511 3072.3679,-1695.2674"/>
<polygon fill="#000000" stroke="#000000" points="3072.368,-1695.53 3076.3679,-1701.53 3072.3679,-1707.53 3068.3679,-1701.53 3072.368,-1695.53"/>
</g>
<!-- 5 -->
<g id="node10" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="#000000" points="3152.7776,-529.7 3152.7776,-956.9 4127.9582,-956.9 4127.9582,-529.7 3152.7776,-529.7"/>
<text text-anchor="middle" x="3640.3679" y="-940.3" font-family="Times,serif" font-size="14.00" fill="#000000">Otoken</text>
<polyline fill="none" stroke="#000000" points="3152.7776,-932.1 4127.9582,-932.1 "/>
<text text-anchor="start" x="3160.7776" y="-915.5" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="3160.7776" y="-898.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;STRIKE_PRICE_SCALE: uint256</text>
<text text-anchor="start" x="3160.7776" y="-881.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;STRIKE_PRICE_DIGITS: uint256</text>
<text text-anchor="start" x="3160.7776" y="-865.1" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="3160.7776" y="-848.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;controller: address</text>
<text text-anchor="start" x="3160.7776" y="-831.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;underlyingAsset: address</text>
<text text-anchor="start" x="3160.7776" y="-814.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;strikeAsset: address</text>
<text text-anchor="start" x="3160.7776" y="-797.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;collateralAsset: address</text>
<text text-anchor="start" x="3160.7776" y="-781.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;strikePrice: uint256</text>
<text text-anchor="start" x="3160.7776" y="-764.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;expiryTimestamp: uint256</text>
<text text-anchor="start" x="3160.7776" y="-747.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;isPut: bool</text>
<polyline fill="none" stroke="#000000" points="3152.7776,-739.3 4127.9582,-739.3 "/>
<text text-anchor="start" x="3160.7776" y="-722.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="3160.7776" y="-705.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getNameAndSymbol(): (tokenName: string, tokenSymbol: string)</text>
<text text-anchor="start" x="3160.7776" y="-689.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getDisplayedStrikePrice(_strikePrice: uint256): string</text>
<text text-anchor="start" x="3160.7776" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_uintTo2Chars(number: uint256): string</text>
<text text-anchor="start" x="3160.7776" y="-655.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getOptionType(_isPut: bool): (shortString: string, longString: string)</text>
<text text-anchor="start" x="3160.7776" y="-638.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_slice(_s: string, _start: uint256, _end: uint256): string</text>
<text text-anchor="start" x="3160.7776" y="-621.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getMonth(_month: uint256): (shortString: string, longString: string)</text>
<text text-anchor="start" x="3160.7776" y="-605.1" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="3160.7776" y="-588.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;init(_addressBook: address, _underlyingAsset: address, _strikeAsset: address, _collateralAsset: address, _strikePrice: uint256, _expiryTimestamp: uint256, _isPut: bool)</text>
<text text-anchor="start" x="3160.7776" y="-571.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOtokenDetails(): (address, address, address, uint256, uint256, bool)</text>
<text text-anchor="start" x="3160.7776" y="-554.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;mintOtoken(account: address, amount: uint256)</text>
<text text-anchor="start" x="3160.7776" y="-537.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;burnOtoken(account: address, amount: uint256)</text>
</g>
<!-- 6 -->
<g id="node11" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="#000000" points="4145.7457,-588.5 4145.7457,-898.1 5146.9901,-898.1 5146.9901,-588.5 4145.7457,-588.5"/>
<text text-anchor="middle" x="4646.3679" y="-881.5" font-family="Times,serif" font-size="14.00" fill="#000000">OtokenFactory</text>
<polyline fill="none" stroke="#000000" points="4145.7457,-873.3 5146.9901,-873.3 "/>
<text text-anchor="start" x="4153.7457" y="-856.7" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="4153.7457" y="-839.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;idToAddress: mapping(bytes32=&gt;address)</text>
<text text-anchor="start" x="4153.7457" y="-823.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;MAX_EXPIRY: uint256</text>
<text text-anchor="start" x="4153.7457" y="-806.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="4153.7457" y="-789.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;addressBook: address</text>
<text text-anchor="start" x="4153.7457" y="-772.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;otokens: address[]</text>
<polyline fill="none" stroke="#000000" points="4145.7457,-764.5 5146.9901,-764.5 "/>
<text text-anchor="start" x="4153.7457" y="-747.9" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="4153.7457" y="-731.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_getOptionId(_underlyingAsset: address, _strikeAsset: address, _collateralAsset: address, _strikePrice: uint256, _expiry: uint256, _isPut: bool): bytes32</text>
<text text-anchor="start" x="4153.7457" y="-714.3" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="4153.7457" y="-697.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;createOtoken(_underlyingAsset: address, _strikeAsset: address, _collateralAsset: address, _strikePrice: uint256, _expiry: uint256, _isPut: bool): address</text>
<text text-anchor="start" x="4153.7457" y="-680.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOtokensLength(): uint256</text>
<text text-anchor="start" x="4153.7457" y="-663.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getOtoken(_underlyingAsset: address, _strikeAsset: address, _collateralAsset: address, _strikePrice: uint256, _expiry: uint256, _isPut: bool): address</text>
<text text-anchor="start" x="4153.7457" y="-647.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;getTargetOtokenAddress(_underlyingAsset: address, _strikeAsset: address, _collateralAsset: address, _strikePrice: uint256, _expiry: uint256, _isPut: bool): address</text>
<text text-anchor="start" x="4153.7457" y="-630.3" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="4153.7457" y="-613.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OtokenCreated(tokenAddress: address, creator: address, underlying: address, strike: address, collateral: address, strikePrice: uint256, expiry: uint256, isPut: bool)</text>
<text text-anchor="start" x="4153.7457" y="-596.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_addressBook: address)</text>
</g>
<!-- 7 -->
<g id="node12" class="node">
<title>7</title>
<polygon fill="#f2f2f2" stroke="#000000" points="4383.7233,-1968.3 4383.7233,-2093.1 4909.0125,-2093.1 4909.0125,-1968.3 4383.7233,-1968.3"/>
<text text-anchor="middle" x="4646.3679" y="-2076.5" font-family="Times,serif" font-size="14.00" fill="#000000">OtokenSpawner</text>
<polyline fill="none" stroke="#000000" points="4383.7233,-2068.3 4909.0125,-2068.3 "/>
<text text-anchor="start" x="4391.7233" y="-2051.7" font-family="Times,serif" font-size="14.00" fill="#000000">Private:</text>
<text text-anchor="start" x="4391.7233" y="-2034.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;SALT: bytes32</text>
<polyline fill="none" stroke="#000000" points="4383.7233,-2026.7 4909.0125,-2026.7 "/>
<text text-anchor="start" x="4391.7233" y="-2010.1" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="4391.7233" y="-1993.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_spawn(logicContract: address, initializationCalldata: bytes): address</text>
<text text-anchor="start" x="4391.7233" y="-1976.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;_computeAddress(logicContract: address, initializationCalldata: bytes): (target: address)</text>
</g>
<!-- 6&#45;&gt;7 -->
<g id="edge5" class="edge">
<title>6&#45;&gt;7</title>
<path fill="none" stroke="#000000" d="M4646.3679,-898.2704C4646.3679,-1168.7394 4646.3679,-1718.9885 4646.3679,-1937.8715"/>
<polygon fill="none" stroke="#000000" points="4635.868,-1937.9864 4646.3679,-1967.9865 4656.868,-1937.9865 4635.868,-1937.9864"/>
</g>
<!-- 8 -->
<g id="node13" class="node">
<title>8</title>
<polygon fill="#f2f2f2" stroke="#000000" points="5164.6087,-462.5 5164.6087,-1024.1 5880.1271,-1024.1 5880.1271,-462.5 5164.6087,-462.5"/>
<text text-anchor="middle" x="5522.3679" y="-1007.5" font-family="Times,serif" font-size="14.00" fill="#000000">Whitelist</text>
<polyline fill="none" stroke="#000000" points="5164.6087,-999.3 5880.1271,-999.3 "/>
<text text-anchor="start" x="5172.6087" y="-982.7" font-family="Times,serif" font-size="14.00" fill="#000000">Internal:</text>
<text text-anchor="start" x="5172.6087" y="-965.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;whitelistedProduct: mapping(bytes32=&gt;bool)</text>
<text text-anchor="start" x="5172.6087" y="-949.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;whitelistedCollateral: mapping(address=&gt;bool)</text>
<text text-anchor="start" x="5172.6087" y="-932.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;whitelistedOtoken: mapping(address=&gt;bool)</text>
<text text-anchor="start" x="5172.6087" y="-915.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;whitelistedCallee: mapping(address=&gt;bool)</text>
<text text-anchor="start" x="5172.6087" y="-898.7" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="5172.6087" y="-881.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;addressBook: address</text>
<polyline fill="none" stroke="#000000" points="5164.6087,-873.7 5880.1271,-873.7 "/>
<text text-anchor="start" x="5172.6087" y="-857.1" font-family="Times,serif" font-size="14.00" fill="#000000">External:</text>
<text text-anchor="start" x="5172.6087" y="-840.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;whitelistCollateral(_collateral: address)</text>
<text text-anchor="start" x="5172.6087" y="-823.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isWhitelistedProduct(_underlying: address, _strike: address, _collateral: address, _isPut: bool): bool</text>
<text text-anchor="start" x="5172.6087" y="-806.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isWhitelistedOtoken(_otoken: address): bool</text>
<text text-anchor="start" x="5172.6087" y="-789.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isWhitelistedCallee(_callee: address): bool</text>
<text text-anchor="start" x="5172.6087" y="-773.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;whitelistProduct(_underlying: address, _strike: address, _collateral: address, _isPut: bool)</text>
<text text-anchor="start" x="5172.6087" y="-756.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;blacklistProduct(_underlying: address, _strike: address, _collateral: address, _isPut: bool)</text>
<text text-anchor="start" x="5172.6087" y="-739.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;isWhitelistedCollateral(_collateral: address): bool</text>
<text text-anchor="start" x="5172.6087" y="-722.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;blacklistCollateral(_collateral: address)</text>
<text text-anchor="start" x="5172.6087" y="-705.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;whitelistOtoken(_otokenAddress: address)</text>
<text text-anchor="start" x="5172.6087" y="-689.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;blacklistOtoken(_otokenAddress: address)</text>
<text text-anchor="start" x="5172.6087" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;whitelistCallee(_callee: address)</text>
<text text-anchor="start" x="5172.6087" y="-655.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;blacklistCallee(_callee: address)</text>
<text text-anchor="start" x="5172.6087" y="-638.7" font-family="Times,serif" font-size="14.00" fill="#000000">Public:</text>
<text text-anchor="start" x="5172.6087" y="-621.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ProductWhitelisted(productHash: bytes32, underlying: address, strike: address, collateral: address, isPut: bool)</text>
<text text-anchor="start" x="5172.6087" y="-605.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ProductBlacklisted(productHash: bytes32, underlying: address, strike: address, collateral: address, isPut: bool)</text>
<text text-anchor="start" x="5172.6087" y="-588.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralWhitelisted(collateral: address)</text>
<text text-anchor="start" x="5172.6087" y="-571.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CollateralBlacklisted(collateral: address)</text>
<text text-anchor="start" x="5172.6087" y="-554.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OtokenWhitelisted(otoken: address)</text>
<text text-anchor="start" x="5172.6087" y="-537.9" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; OtokenBlacklisted(otoken: address)</text>
<text text-anchor="start" x="5172.6087" y="-521.1" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CalleeWhitelisted(_callee: address)</text>
<text text-anchor="start" x="5172.6087" y="-504.3" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; CalleeBlacklisted(_callee: address)</text>
<text text-anchor="start" x="5172.6087" y="-487.5" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyFactory()</text>
<text text-anchor="start" x="5172.6087" y="-470.7" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;&#160;constructor(_addressBook: address)</text>
</g>
</g>
</svg>
